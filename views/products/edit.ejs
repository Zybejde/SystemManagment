<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Supplier</title>
    <!-- Bootstrap styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <!-- Importing custom CSS -->
    <link rel="stylesheet" href="/public/styles.css">
</head>
<body>


<div class="container-fluid px-4 py-4">
    <!-- Header Section -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1 fw-bold">Edit Product</h2>
            <p class="text-muted">Update product information</p>
        </div>
        <a href="/inventory/products" class="btn btn-outline-secondary fw-bold">
            <i class="bi bi-arrow-left me-2 fw-bold"></i>Back to Products
        </a>
    </div>
    <div class="card">
        <div class="card-body">
            <!-- Edit form action -->
            <form action="/inventory/products/edit/<%= product.id %>" method="POST">
                <div class="mb-4">
                    <label for="name" class="form-label fw-bold">Product Name</label>
                    <input type="text" class="form-control" id="name" name="name" value="<%= product.name %>" required>
                </div>
                <div class="mb-4">
                    <label for="description" class="form-label fw-bold">Description</label>
                    <textarea class="form-control" id="description" name="description" required><%= product.description %></textarea>
                </div>
               <div class="mb-4">
  <label for="category" class="form-label fw-bold">Category</label>
 <select class="form-select" id="category" name="category" required> 
    <option value="smartphones" <%= product.category === 'smartphones' ? 'selected' : '' %>>Smartphones</option>
    <option value="laptops" <%= product.category === 'laptops' ? 'selected' : '' %>>Laptops</option>
    <option value="desktops" <%= product.category === 'desktops' ? 'selected' : '' %>>Desktops</option>
    <option value="tablets" <%= product.category === 'tablets' ? 'selected' : '' %>>Tablets</option>
    <option value="monitors" <%= product.category === 'monitors' ? 'selected' : '' %>>Monitors</option>
    <option value="printers_scanners" <%= product.category === 'printers_scanners' ? 'selected' : '' %>>Printers & Scanners</option>
    <option value="storage_devices" <%= product.category === 'storage_devices' ? 'selected' : '' %>>Storage Devices</option>
    <option value="networking" <%= product.category === 'networking' ? 'selected' : '' %>>Networking</option>
    <option value="accessories" <%= product.category === 'accessories' ? 'selected' : '' %>>Accessories</option>
    <option value="headphones_audio" <%= product.category === 'headphones_audio' ? 'selected' : '' %>>Headphones & Audio</option>
    <option value="tv_entertainment" <%= product.category === 'tv_entertainment' ? 'selected' : '' %>>TV & Entertainment</option>
    <option value="wearables" <%= product.category === 'wearables' ? 'selected' : '' %>>Wearables</option>
    <option value="gaming" <%= product.category === 'gaming' ? 'selected' : '' %>>Gaming</option>
    <option value="power_charging" <%= product.category === 'power_charging' ? 'selected' : '' %>>Power & Charging</option>
    <option value="components" <%= product.category === 'components' ? 'selected' : '' %>>Components</option>
    <option value="smart_home" <%= product.category === 'smart_home' ? 'selected' : '' %>>Smart Home</option>
    <option value="cameras" <%= product.category === 'cameras' ? 'selected' : '' %>>Cameras</option>
  </select>
</div>

                <div class="mb-4">
                    <label for="price" class="form-label fw-bold">Price</label>
                    <input type="number" step="0.01" class="form-control" id="price" name="price" value="<%= product.price %>" required>
                </div>
                <div class="mb-4">
                    <label for="stock" class="form-label fw-bold">Stock</label>
                    <input type="number" class="form-control" id="stock" name="stock" value="<%= product.stock %>" required>
                </div>
                <div class="d-flex justify-content-between">
                    <a href="/inventory/products" class="btn btn-secondary fw-bold">Cancel</a>
                    <button type="submit" class="btn btn-primary fw-bold">Update Product</button>
                </div>
            </form>

            <!-- Alert Messages -->
            <% if (successMessage) { %>
                <div class="alert alert-success alert-dismissible show mt-4" role="alert" id="successAlert">
                    <i class="bi bi-check-circle me-2"></i><%= successMessage %>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            <% } %>

            <% if (errorMessage) { %>
                <div class="alert alert-danger alert-dismissible show mt-4" role="alert" id="errorAlert">
                    <i class="bi bi-exclamation-circle me-2"></i><%= errorMessage %>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            <% } %>
        </div>
    </div>
</div>

<script>
    // Auto-dismiss alerts after 5 seconds
    document.addEventListener('DOMContentLoaded', function() {
        const successAlert = document.getElementById('successAlert');
        const errorAlert = document.getElementById('errorAlert');

        if (successAlert) {
            setTimeout(() => {
                const bsAlert = new bootstrap.Alert(successAlert);
                bsAlert.close();
            }, 5000);
        }

        if (errorAlert) {
            setTimeout(() => {
                const bsAlert = new bootstrap.Alert(errorAlert);
                bsAlert.close();
            }, 5000);
        }
    });
</script>

</body>
</html>
